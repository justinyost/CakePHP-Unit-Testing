# Language Tests are Running In
language: php

# PHP versions to test against
php:
  - 5.4
  - 5.5
  - 5.6

# Node version, if you have JS to test.
#node_js:
#  - "0.10"

# Environment Variables to set
env:
  global:
    - APP_ENV=travis

# Services to Enable
services:
  - mysql

# Branches to be built or not
branches:
  # Blacklist these branches
  except:
    - gh-pages

# Before Installing Software/Dependencies Needed
before_install:
  - composer self-update

# Install Software/Dependencies Needed
install:
  - git submodule update --init --recursive
  - composer install --optimize-autoloader --no-interaction
  - ./bin/set-owner
  - ./bin/set-configs "$APP_ENV"
  - ./bin/writedirs

# Before the Test Script Runs
before_script:
  - phpenv rehash
  - mysql -e 'DROP DATABASE IF EXISTS `travis_app`; CREATE DATABASE `travis_app`;'

# Test Script Call
script:
  - ./bin/run-codesniffer y
  - ./bin/run-tests All --stderr

# After a Successful Build
after_success:

# After a Failed Build
after_failure:

# After every Build
after_script:

# Notifications Settings
notifications:
  email: false
